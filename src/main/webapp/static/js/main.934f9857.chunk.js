(this["webpackJsonpwebapp-anime"]=this["webpackJsonpwebapp-anime"]||[]).push([[0],{54:function(e,t,a){},71:function(e,t,a){e.exports=a(92)},76:function(e,t,a){},77:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a.n(l),s=(a(76),a(4)),o=a(5),c=a(7),m=a(6),u=(a(77),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={inputText:""},e}return Object(o.a)(a,[{key:"setInputState",value:function(e){this.setState({inputText:e})}},{key:"triggerSearch",value:function(e){window.location.href="/search/".concat(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"form-group search-container row"},r.a.createElement("div",{className:"col-sm-3"},"\xa0"),r.a.createElement("div",{className:"col-sm-6 input-group"},r.a.createElement("span",{class:"fa fa-search form-control-feedback"}),r.a.createElement("input",{onChange:function(t){return e.setInputState(t.target.value)},type:"text",class:"form-control",placeholder:"Search"}),r.a.createElement("div",{class:"input-group-append"},r.a.createElement("span",{onClick:function(t){return e.triggerSearch(e.state.inputText)},class:"input-group-text"},r.a.createElement("i",{className:"fa fa-search"})))),r.a.createElement("div",{className:"col-sm-3"},"\xa0"))}}]),a}(r.a.Component)),d="https://kitsu.io/api/edge",h=function(){return fetch("".concat(d,"/trending/anime"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},p=function(){return fetch("".concat(d,"/anime?filter[status]=upcoming&page[limit]=5&sort=-user_count"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},v=function(e){return fetch("".concat(d,"/anime?fields[categories]=slug,title&filter[slug]=").concat(e),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},f=function(e){return fetch("".concat(d,"/anime?filter[text]=").concat(e),{method:"GET",headers:{"content-type":"application/json"}}).then((function(t){return console.log("".concat(d,"/anime?filter[text]=").concat(e)),t.json()}))},g=function(e){return fetch("".concat(d,"/anime?filter[id]=").concat(e),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},E=(a(54),a(12)),b=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.attr;return r.a.createElement(E.b,{to:"/details/".concat(e.slug),style:{textDecoration:"none"}},r.a.createElement("span",null,r.a.createElement("div",{className:"col mb-6"},r.a.createElement("div",{class:"card h-100"},r.a.createElement("span",{title:"RAating",class:Math.round(e.averageRating)?"notify-badge":"notify-badge grey-m"},"\xa0",Math.round(e.averageRating)?Math.round(e.averageRating):"N/A","\xa0"),r.a.createElement("img",{src:e.posterImage.large,class:"card-img-top",alt:""})),r.a.createElement("div",{className:"cardTitle"},r.a.createElement("strong",null,e.canonicalTitle)),r.a.createElement("div",null,"\xa0"))))}}]),a}(r.a.Component),y=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement("h2",null,this.props.title),r.a.createElement("div",{className:"wbdv-grid-row row row-cols-1 row-cols-md-5"},this.props.animeList.map((function(e){return console.log(e),r.a.createElement(b,{animeId:e,attr:e.attributes})}))))}}]),a}(r.a.Component),w=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement(y,{title:"Trending",animeList:this.props.trendingAnime}),r.a.createElement(y,{title:"Upcoming",animeList:this.props.upcomingAnime}))}}]),a}(r.a.Component),j=a(25),N=a(37),k="https://cs4500-20su1-ss-proj-serv-java.herokuapp.com/api",O=function(e){return fetch("".concat(k,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){try{return JSON.parse(e)}catch(t){return null}}))},C=function(e,t){return fetch("".concat(k,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return console.log(e),e&&200!=e.status?null:e.json()}))},A=function(){return fetch("".concat(k,"/logout"),{method:"POST"}).then((function(e){return console.log("".concat(k,"/logout")),e}))},S=a(49),x=a.n(S),R=a(82),T=new Date((new Date).getTime()+36e5),L=function(e){x.a.set("access_token",e,{expires:T})},I=function(){return x.a.get("access_token")},D=function(){return I()&&"null"!==I()},P=function(e){R("user",e)},M=function(){return R("user")},U=a(10),F=a.n(U),G=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:"",email:"",username:"",password:"",usertype:"user"},n.handleSubmit=n.handleSubmit.bind(Object(N.a)(n)),n}return Object(o.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"handleSubmit",value:function(e){F()(".js-close").on("click",(function(){F()("#error-container-reg").hide(),F()("#error-container-reg").html("")}));var t={name:this.state.name,username:this.state.username,password:this.state.password,email:this.state.email,usertype:this.state.usertype},a=this.buildErrorString(t);if(a)return F()("#error-container-reg").show(),void F()("#error-container-reg").html(a);O(t).then((function(e){if(null==e)return F()("#error-container-reg").show(),void F()("#error-container-reg").html("Sorry! Username is already taken. Try a different one.");null!==e&&e.hasOwnProperty("accessToken")&&(L(e.accessToken),P(e)),document.getElementById("closeButtonRegister").click(),window.location.reload(!1)}))}},{key:"buildErrorString",value:function(e){var t="";if(e.name||(t+="-  Name cannot be empty. <br/>"),e.username||(t+="- UserName cannot be empty.<br/>"),e.password?e.password.length<8&&(t+="- Passwords must be atleast 8 characters long.<br/>"):t+="- Password cannot be empty!<br/>",e.email){t+=/\S+@\S+\.\S+/.test(e.email)?"":"- Email must be of format name@domain.com"}else t+="- Email cannot be empty.<br/>";return t}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement("div",{class:"modal fade",id:"registerModal",tabindex:"-1",role:"dialog","aria-labelledby":"registerModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Sign Up!"),r.a.createElement("button",{type:"button",class:" js-close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("div",{id:"error-container-reg",style:{display:"none"},class:"alert alert-danger",role:"alert"}),r.a.createElement("form",{id:"registerForm"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"name",onChange:function(t){return e.handleInputChange(t)},name:"name",className:"form-control",placeholder:"Alice",title:"Your name"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"username"},"Username"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"username",onChange:function(t){return e.handleInputChange(t)},name:"username",className:"form-control wbdv-field wbdv-username",placeholder:"animeFan123",title:"Username for login"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"password",onChange:function(t){return e.handleInputChange(t)},name:"password",className:"form-control wbdv-field wbdv-password",placeholder:"abc123#$%",type:"password"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"email"},"E-mail Address"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"email",onChange:function(t){return e.handleInputChange(t)},name:"email",className:"form-control wbdv-field wbdv-email",placeholder:"animefan@animeworld.com",title:"Use this e-mail for occasional updates"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-formx-label",htmlFor:"role"},"Role"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{id:"role",onChange:function(t){return e.handleInputChange(t)},name:"usertype",className:"form-control wbdv-field wbdv-role"},r.a.createElement("option",{value:"user"},"Anime Fan"),r.a.createElement("option",{value:"admin"},"Admin")))))),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{id:"closeButtonRegister",type:"button",class:"btn btn-secondary js-close","data-dismiss":"modal"},"Close"),r.a.createElement("button",{onClick:function(t){return e.handleSubmit()},type:"button",class:"btn btn-primary"},"Save changes"))))))}}]),a}(r.a.Component),B=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e}return Object(o.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"handleSubmit",value:function(e){F()(".js-close").on("click",(function(){F()("#error-container").hide(),F()("#error-container").html("")}));var t={username:this.state.username,password:this.state.password},a="";if(t.username||(a+="- User name cannot be empty! <br/>"),t.password||(a+="- Password cannot be empty!"),a)return F()("#error-container").show(),void F()("#error-container").html(a);C(t.username,t.password).then((function(e){if(null==e)return F()("#error-container").show(),void F()("#error-container").html("Username and Password combination does not exist! try again");null!==e&&e.hasOwnProperty("accessToken")&&L(e.accessToken),P(e),document.getElementById("closeButtonLogin").click(),window.location.reload(!1)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement("div",{class:"modal fade",id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"loginModal","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Login"),r.a.createElement("button",{type:"button",class:"close js-close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("div",{id:"error-container",style:{display:"none"},class:"alert alert-danger",role:"alert"}),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"username"},"Username"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"username",onChange:function(t){return e.handleInputChange(t)},name:"username",className:"form-control wbdv-field wbdv-username",placeholder:"animeFan123",title:"Use this username to login"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"password",onChange:function(t){return e.handleInputChange(t)},name:"password",className:"form-control wbdv-field wbdv-password",placeholder:"abc123#$%",type:"password"}))))),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{id:"closeButtonLogin",type:"button",class:"btn btn-secondary js-close","data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{onClick:function(t){return e.handleSubmit()},type:"button",class:"btn btn-primary"},"Login"))))))}}]),a}(r.a.Component),V=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={inputText:"",isLoggedin:e.props.isLoggedin},e}return Object(o.a)(a,[{key:"setInputState",value:function(e){this.setState({inputText:e})}},{key:"handleLogout",value:function(e){A().then((function(){L(null),P(null),window.location.reload(!1)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"Animecadabra"),r.a.createElement(G,null),r.a.createElement(B,null),r.a.createElement("form",{className:"form-inline"},!D()&&r.a.createElement("span",null,r.a.createElement("button",{style:{marginRight:"10px"},"data-toggle":"modal","data-target":"#loginModal",className:"btn btn-outline-info my-2 my-sm-0",type:"button"},"Sign in"),r.a.createElement("button",{style:{marginRight:"10px"},"data-toggle":"modal","data-target":"#registerModal",className:"btn btn-outline-info my-2 my-sm-0",type:"button"},"Sign up")),D()&&r.a.createElement("span",null,r.a.createElement("span",{style:{color:"white",marginRight:"30px"}},function(){var e=M();return e?e.name?"Welcome ".concat(e.name,"!"):e.username?"Welcome ".concat(e.username,"!"):void 0:"Welcome!"}()),function(){var e=M();return e&&"admin"===e.usertype}()&&r.a.createElement(E.b,{to:"/admin/reviews",style:{textDecoration:"none"}},r.a.createElement("span",{style:{color:"white","margin-right":"30px",fontSize:"20px"}},"Admin Reviews")),r.a.createElement(E.b,{to:"/profile",style:{textDecoration:"none"}},r.a.createElement("span",{style:{color:"white","margin-right":"30px",fontSize:"20px"}},"Profile")),r.a.createElement("button",{onClick:function(t){return e.handleLogout()},style:{"margin-right":"10px"},className:"btn btn-outline-info my-2 my-sm-0",type:"button"},"Sign Out")),r.a.createElement("input",{onChange:function(t){return e.setInputState(t.target.value)},className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{onClick:function(){return e.props.animeSearch(e.state.inputText)},className:"btn btn-outline-success my-2 my-sm-0",type:"button"},"Search")))}}]),a}(r.a.Component),W=(a(61),a(121),a(125),a(126),a(120));Object(W.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));var J=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={trendingAnime:[],upcomingAnime:[],searchedAnime:[],view:"",showAlert:!1,isLoggedIn:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoggedIn:D()});var t=this.props.match.params.searchTitle;t?this.searchAnime(t):(this.setState({view:"Landing"}),h().then((function(t){console.log(t);var a=t.data;a.length=Math.min(a.length,10),e.setState({trendingAnime:a})})),this.loadUpComingAnime())}},{key:"loadUpComingAnime",value:function(){var e=this;p().then((function(t){var a=t.data;e.setState({upcomingAnime:a})}))}},{key:"searchAnime",value:function(e){var t=this;""!==e?f(e).then((function(e){var a=e.hasOwnProperty("data")&&e.data;t.setState({searchedAnime:a,view:"Search"})})):this.setState({view:"Landing"})}},{key:"render",value:function(){return this.searchAnime=this.searchAnime.bind(this),r.a.createElement("span",null,r.a.createElement(V,{animeSearch:this.searchAnime,isLoggedin:this.state.isLoggedIn}),r.a.createElement("div",{className:"container"},r.a.createElement(u,null),"Landing"===this.state.view&&r.a.createElement(w,{trendingAnime:this.state.trendingAnime,upcomingAnime:this.state.upcomingAnime}),"Search"===this.state.view&&r.a.createElement(y,{title:"Search Results",animeList:this.state.searchedAnime})))}}]),a}(r.a.Component),Y=(r.a.Component,a(11)),_=(a(85),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={animeDetails:{},id:""},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.getAnimeDetails(this.props.match.params.animeTitle)}},{key:"getAnimeDetails",value:function(e){var t=this;v(e).then((function(e){var a=e.data&&e.data.length?e.data[0]:{},n=0===Object.keys(a).length&&a.constructor===Object?"":a.id;t.setState({animeDetails:a,id:n})}))}},{key:"getCAClassName",value:function(){if(this.state.animeDetails&&this.state.animeDetails.hasOwnProperty("averageRating")){var e=parseInt(this.state.animeDetails.averageRating);return e>=80?"green-ca":e>50&&e<80?"orange-ca":"red"}}},{key:"render",value:function(){var e=this.state.animeDetails?this.state.animeDetails.attributes:{};return e?r.a.createElement("span",null,r.a.createElement(V,null),r.a.createElement("div",{className:"containser-fluid"},r.a.createElement("div",{className:"rows"},r.a.createElement("div",{className:"animePoster"},r.a.createElement("div",{class:"card bg-dark text-white wbdv-details-card"},r.a.createElement("img",{src:e.posterImage.large,class:"card-img",alt:""}))),r.a.createElement("div",{className:"animeDetailsContainer"},r.a.createElement("div",{className:"animeDetails"},r.a.createElement("h2",null,e.canonicalTitle),r.a.createElement("div",null,r.a.createElement(E.b,{to:"/animeId/".concat(this.state.id,"/reviews"),style:{textDecoration:"none"}},r.a.createElement("button",{className:"btn btn-info","data-toggle":"modal","data-target":".bd-example-modal-lg"},"Check user reviews!"))),e.averageRating&&r.a.createElement("div",{className:"caApprovals"},e.averageRating,"% Community Approvals ",e.userCount&&r.a.createElement("i",{className:"subtext"},"( from ",e.userCount," Users )")),(e.popularityRank||e.ratingRank)&&r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("div",{className:"popularityWrap"},e.popularityRank&&r.a.createElement("div",null,r.a.createElement("i",{class:"fa fa-heart"})," #",e.popularityRank," \xa0",r.a.createElement("i",{className:"subtext"},"(Popularity Rank)")),e.ratingRank&&r.a.createElement("div",null,r.a.createElement("i",{class:"fa fa-star"}),e.ratingRank,"\xa0",r.a.createElement("i",{className:"subtext"},"(Ratings Rank)"))),r.a.createElement("div",{className:"divider"})),r.a.createElement("div",{className:"synopsis"},e.synopsis),e.ageRating&&r.a.createElement("div",null,r.a.createElement("strong",null,"Age Rating:")," ",e.ageRating?e.ageRating:"N/A"),r.a.createElement("div",null,r.a.createElement("strong",null,"Episodes:")," ",e.episodeCount?e.episodeCount:"N/A"),r.a.createElement("div",null,r.a.createElement("strong",null,"Status:")," ",e.status?e.status:"N/A")))))):r.a.createElement("span",null)}}]),a}(r.a.Component)),z=a(60),Q="https://cs4500-20su1-ss-proj-serv-java.herokuapp.com",$=function(e){return fetch("".concat("https://kitsu.io/api/edge","/media-reactions?filter[animeId]=").concat(e,"&include=user&page[limit]=10&sort=-upVotesCount"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))},X=function(e){return fetch("".concat(Q,"/review"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},q=function(e){return fetch("".concat(Q,"/reviews?uid=").concat(e),{method:"GET"}).then((function(e){return e&&0!==e.length?e.json():[]}))},H=function(e){return fetch("".concat(Q,"/reviewsByAid?aid=").concat(e),{method:"GET"}).then((function(e){return e&&0!==e.length?e.json():[]}))},K=function(e){return fetch("".concat(Q,"/review?rid=").concat(e),{method:"DELETE"}).then((function(t){return console.log("Delete"),e}))},Z=function(){return fetch("".concat(Q,"/allReviews"),{method:"GET"}).then((function(e){return e&&0!==e.length?e.json():[]}))},ee=a(122),te=a(123),ae=a(124),ne=a(127),re=a(46),le=a(43),ie=a(44),se=a(45),oe=a(42),ce=Object(W.a)((function(e){return{root:{maxWidth:"100%",marginBottom:"20px"},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:le.a[500]},avatar1:{backgroundColor:ie.a[500]},avatar2:{backgroundColor:se.a[500]},avatar3:{backgroundColor:oe.a[500]}}}));function me(e){var t=ce(),a=e.reviews,n=e.user;return r.a.createElement(ee.a,{className:t.root},r.a.createElement(te.a,{avatar:null==n||null==n.avatar?r.a.createElement(ne.a,{"aria-label":"recipe",className:t.avatar2},n&&n.name.length?n.name[0].toUpperCase():"A"):r.a.createElement(ne.a,{"aria-label":"recipe",className:t.avatar3},r.a.createElement("img",{className:t.reviewImage,src:n.avatar.tiny})),action:e.isAdminView?r.a.createElement("span",{"data-toggle":"modal","data-target":"#deleteAdminModal","data-rid":n.rid,className:"btn btn-trash"},r.a.createElement("i",{className:"fa fa-trash"})):r.a.createElement("i",null,"Upvotes: ",a.upVotesCount),title:n?e.isUserReview?r.a.createElement(E.b,{to:"/profile/".concat(n.id)},n.name):n.name:"Anonymous",subheader:r.a.createElement("span",null,a.createdAt.split("T")[0],e.isProfileView?e.linkToAnime:"")}),r.a.createElement(ae.a,null,r.a.createElement(re.a,{variant:"body2",color:"textSecondary",component:"p"},a.reaction)))}var ue=a(128),de=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={reviewList:[],userList:[],userReviewsList:[],animeTitle:"",animePoster:"",ajaxDone:!1,newCommentText:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getUserReviews(this.props.match.params.animeId),this.getAnime(this.props.match.params.animeId),this.getReviews(this.props.match.params.animeId)}},{key:"handleInputChange",value:function(e){this.setState({newCommentText:e.target.value})}},{key:"createReview",value:function(){var e=this,t={userId:M().id,reaction:this.state.newCommentText,animeId:this.props.match.params.animeId};X(t).then((function(t){e.setState({userReviewsList:[t].concat(Object(z.a)(e.state.userReviewsList)),newCommentText:""})}))}},{key:"getUserReviews",value:function(e){var t=this;H(e).then((function(e){t.setState({userReviewsList:e})}))}},{key:"getReviews",value:function(e){var t=this;$(e).then((function(e){var a=e.data&&e.data.length?e.data:[],n=e.included&&e.included.length?e.included:[];t.setState({reviewList:a,userList:n,ajaxDone:!0})}))}},{key:"getAnime",value:function(e){var t=this;g(e).then((function(e){var a=e.data&&e.data.length?e.data[0]:{};console.log(a),a!=={}&&a.attributes.coverImage&&t.setState({animeTitle:a.attributes.canonicalTitle,animePoster:a.attributes.coverImage.tiny||""})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement(V,null),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,this.state.animeTitle),this.state.ajaxDone&&this.state.animePoster&&r.a.createElement("img",{src:this.state.animePoster,styles:{width:"fit-content"},alt:"anime"}),r.a.createElement("br",null),r.a.createElement("br",null),D()?r.a.createElement("div",null,r.a.createElement(ue.a,{id:"reviews!",rowsMin:3,onChange:function(t){return e.handleInputChange(t)},name:"reaction",value:this.state.newCommentText,className:"form-control",placeholder:"Wrte down the reactions to this anime!",title:"your reaction!"}),r.a.createElement("button",{onClick:function(t){return e.createReview()},type:"button",class:"btn btn-info float-right"},"Add review"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement(ee.a,null,r.a.createElement("div",{styles:{textAlign:"center"}},"Login / Sign up to leave your reviews!")),this.state.userReviewsList&&0!==this.state.userReviewsList.length&&r.a.createElement("span",null,r.a.createElement("h3",null,r.a.createElement("i",null,"Animecadabra User Reviews")),this.state.userReviewsList.map((function(e,t){var a={name:e.name,id:e.userId},n={reaction:e.reaction,createdAt:e.timestamp,upVotesCount:"N/A"};return r.a.createElement(me,{isUserReview:!0,reviews:n,user:a})}))),this.state.reviewList&&r.a.createElement("span",null,r.a.createElement("h3",null,r.a.createElement("i",null,"Curated Reviews")),this.state.reviewList.map((function(t,a){return r.a.createElement(me,{reviews:t.attributes,user:e.state.userList[a]?e.state.userList[a].attributes:null})}))),this.state.ajaxDone&&0===this.state.reviewList.length&&r.a.createElement("h5",null,"Sorry! Doesn't look like anyone has reviewed to this yet")))}}]),a}(r.a.Component),he=a(35),pe=function(e){return fetch("".concat("https://cs4500-20su1-ss-proj-serv-java.herokuapp.com","/profile?uid=").concat(e),{method:"GET"}).then((function(e){return e.json()}))},ve=function(e){return fetch("".concat("https://cs4500-20su1-ss-proj-serv-java.herokuapp.com","/profile"),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},fe=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={id:"",isEditing:!1,isEditable:!0,name:"",about:"",email:"",gender:"",timeSpentOnAnime:"",userReviewsList:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){if(this.props.match.params&&this.props.match.params.userId)this.updateProfile(this.props.match.params.userId),this.setState({isEditable:!1});else{var e=M();e&&this.updateProfile(e.id)}}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"updateProfile",value:function(e){var t=this;pe(e).then((function(e){t.setState(Object(he.a)({},e))})),q(e).then((function(e){t.setState({userReviewsList:e})}))}},{key:"setEditing",value:function(e){this.setState({isEditing:e})}},{key:"handleSubmit",value:function(e){var t=this,a=Object(he.a)({},this.state);ve(a).then((function(e){console.log(e),t.setState(Object(he.a)(Object(he.a)({},e),{},{isEditing:!1}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement(V,null),D()||!this.state.isEditable?r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h1",null,this.state.name,"'s Profile Page"),r.a.createElement("hr",null),this.state.isEditing&&r.a.createElement("form",{id:"registerForm"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"firstName"},"First Name"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"name",onChange:function(t){return e.handleInputChange(t)},name:"name",value:this.state.name,className:"form-control",placeholder:"Alice",title:"Your name"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("label",null,"About"),r.a.createElement(ue.a,{id:"about",rowsMin:3,onChange:function(t){return e.handleInputChange(t)},name:"about",className:"form-control",placeholder:"Tell us about urself!",value:this.state.about,title:"About you!"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2"},"Email"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"email",onChange:function(t){return e.handleInputChange(t)},name:"email",className:"form-control",value:this.state.email,placeholder:"email",title:"Your email"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2"},"Gender"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"gender",onChange:function(t){return e.handleInputChange(t)},name:"gender",value:this.state.gender,className:"form-control",placeholder:"gender",title:"Your gender"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2"},"Time spent on Anime"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{id:"timeSpentOnAnime",onChange:function(t){return e.handleInputChange(t)},name:"timeSpentOnAnime",className:"form-control",value:this.state.timeSpentOnAnime,placeholder:"Alice",type:Number,title:"Time Spent on Anime"}))),this.state.isEditing&&r.a.createElement("button",{onClick:function(t){return e.handleSubmit()},type:"button",class:"btn btn-primary"},"Save changes")),!this.state.isEditing&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h5",null,"Profile Name:"),r.a.createElement("i",null,this.state.name)),r.a.createElement("div",null,r.a.createElement("h5",null,"About:"),r.a.createElement("i",null,this.state.about)),this.state.isEditable&&r.a.createElement("div",null,r.a.createElement("h5",null,"Email"),r.a.createElement("i",null,this.state.email)),this.state.isEditable&&r.a.createElement("div",null,r.a.createElement("h5",null,"Gender"),r.a.createElement("i",null,this.state.gender||"N/A")),r.a.createElement("div",null,r.a.createElement("h5",null,"Time spent on Anime"),r.a.createElement("i",null,this.state.timeSpentOnAnime||"N/A")),r.a.createElement("br",null),r.a.createElement("br",null),D()&&this.state.isEditable&&r.a.createElement("button",{onClick:function(t){return e.setEditing(!0)},type:"button",class:"btn btn-secondary"},"Edit Profile")),r.a.createElement("div",null,r.a.createElement("br",null),this.state.userReviewsList&&0!==this.state.userReviewsList.length&&r.a.createElement("span",null,r.a.createElement("h3",null,r.a.createElement("i",null,this.state.name,"'s Reviews")),this.state.userReviewsList.map((function(e,t){var a={name:e.name,id:e.userId},n={reaction:e.reaction,createdAt:e.timestamp,upVotesCount:"N/A"};return r.a.createElement(me,{linkToAnime:r.a.createElement(E.b,{to:"/animeId/".concat(e.animeId,"/reviews")},r.a.createElement("br",null),"Go to this anime review!"),isProfileView:!0,isUserReview:!0,reviews:n,user:a})}))))):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Please login/Sign up to view this page")))}}]),a}(r.a.Component),ge=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={adminReviewList:[],ridToDelete:""},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;Z().then((function(t){e.setState({adminReviewList:t});var a=e;F()(".btn-trash").on("click",(function(e){a.setState({ridToDelete:F()(this).data("rid")})}))}))}},{key:"deleteReview",value:function(e){var t=this;this.state.ridToDelete&&K(this.state.ridToDelete).then((function(e){console.log("delete"),t.setState((function(e){return{adminReviewList:e.adminReviewList.filter((function(e){return e.id!==t.state.ridToDelete}))}})),F()(".close").click()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("span",null,r.a.createElement(V,null),r.a.createElement("h1",null,"Admin Review Dashboard"),r.a.createElement("hr",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{class:"modal fade",id:"deleteAdminModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Delete Review"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},"Are you sure you want to delete this review?"),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{type:"button",onClick:function(t){return e.deleteReview(t)},class:"btn btn-danger"},"Delete"))))),this.state.adminReviewList.map((function(e,t){console.log(e);var a={name:e.name,id:e.userId,rid:e.id},n={reaction:e.reaction,createdAt:e.timestamp,upVotesCount:"N/A"};return r.a.createElement(me,{linkToAnime:r.a.createElement(E.b,{to:"/animeId/".concat(e.animeId,"/reviews")},r.a.createElement("br",null),"Go to this anime review!"),isProfileView:!0,isAdminView:!0,isUserReview:!0,reviews:n,user:a})}))))}}]),a}(r.a.Component),Ee=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement(V,null),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Please login/Sign up to view this page")))}}]),a}(r.a.Component),be=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(Y.a,{path:"/",exact:!0,render:function(e){return D()?r.a.createElement(J,{authenticated:!0}):r.a.createElement(J,{authenticated:!1})},component:J}),r.a.createElement(Y.a,{path:["/search/:searchTitle","/search"],exact:!0,component:J}),r.a.createElement(Y.a,{path:"/register",exact:!0,component:G}),r.a.createElement(Y.a,{path:"/login",exact:!0,component:B}),r.a.createElement(Y.a,{path:"/profile",exact:!0,component:fe}),r.a.createElement(Y.a,{path:"/profile/:userId",exact:!0,component:fe}),r.a.createElement(Y.a,{path:"/details/:animeTitle",exact:!0,component:_}),r.a.createElement(Y.a,{path:"/animeId/:animeId/reviews",exact:!0,component:de}),r.a.createElement(Y.a,{path:"/admin/reviews",exact:!0,component:function(){return D()?r.a.createElement(ge,null):r.a.createElement(Ee,null)}})))}}]),a}(r.a.Component);a(86);var ye=function(){return r.a.createElement("span",null,r.a.createElement(be,null),r.a.createElement("footer",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",style:{color:"white"},href:"https://docs.google.com/document/d/10mORL0pYz2giDSrBBjlm4hAQLk5QQwaY_VnXX08SDfc/edit"},"Privacy policy")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(87),a(88),a(89),a(90),a(91);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.934f9857.chunk.js.map